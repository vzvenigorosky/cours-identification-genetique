<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QCM d'entraînement M1</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f0f0f0;
        }
        .question {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        .question h2 {
            font-size: 20px;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            margin-bottom: 10px;
        }
        input[type="radio"] {
            margin-right: 10px;
        }
        .correct {
            color: green;
        }
        .wrong {
            color: red;
        }
        .score {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #ffffff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .score h2 {
            margin: 0;
            font-size: 24px;
        }
    </style>
</head>
<body>
      <button onclick="window.location.href = 'Questions_cours.html'">Retour aux fiches récapitulatives</button>
      <br>
      <br>
<div id="quiz"></div>
<div class="score">
    <h2>Note: <span id="score">0</span> sur 10</h2>
</div>

<script src="quiz-data.js"></script>
<script src="script.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
    const quizContainer = document.getElementById('quiz');
    let score = 0;
    let answeredQuestions = 0;

    // Function to shuffle array
    const shuffleArray = array => {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    };

    // Randomly select 20 questions
    const selectedQuestions = quizData.sort(() => 0.5 - Math.random()).slice(0, 20);

    selectedQuestions.forEach((question, index) => {
        // Select three random wrong answers
        const wrongAnswers = question.wrongAnswers.sort(() => 0.5 - Math.random()).slice(0, 3);

        // Combine with the correct answer and shuffle
        const answers = [...wrongAnswers, question.correctAnswer].sort(() => 0.5 - Math.random());

        // Create question element
        const questionElem = document.createElement('div');
        questionElem.classList.add('question');
        questionElem.innerHTML = `<h2>${index + 1}. ${question.question}</h2>`;

        const ul = document.createElement('ul');
        answers.forEach(answer => {
            const li = document.createElement('li');
            const input = document.createElement('input');
            input.type = 'radio';
            input.name = `question-${index}`;
            input.value = answer;
            input.id = `question-${index}-${answer}`;

            const label = document.createElement('label');
            label.htmlFor = input.id;
            label.textContent = answer;

            input.addEventListener('change', () => {
                answeredQuestions++;
                if(answer === question.correctAnswer) {
                    score += 0.5;
                    label.classList.add('correct');
                    label.innerHTML += ' ✓';
                } else {
                    label.classList.add('wrong');
                    label.innerHTML += ' ✗';
                }

                // Disable all inputs for this question
                document.querySelectorAll(`[name="question-${index}"]`).forEach(inp => inp.disabled = true);

                // Update score
                const totalScore = (score / answeredQuestions * 20).toFixed(1);
                document.getElementById('score').textContent = `${totalScore} sur 10`;
            });

            li.appendChild(input);
            li.appendChild(label);
            ul.appendChild(li);
        });

        questionElem.appendChild(ul);
        quizContainer.appendChild(questionElem);
    });
});

</script>

</body>
</html>
